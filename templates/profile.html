<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Профиль {{.ProfileUsername}} • Polar Lights 2026</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">
    <script>
        window.userRole = "{{.Role}}";
    </script>
    <script src="/static/script.js" defer></script>
</head>
<body class="aurora-body">
    <div class="site-container">
        <header class="aurora-header compact">
            <div class="header-container">
                <div class="header-top">
                    <a href="/" class="logo">
                        <img src="/static/images/logo.png" alt="Polar Lights Forum 2026">
                        <div class="logo-text">
                            <span>Polar Lights</span>
                            <small>New Year 2026</small>
                        </div>
                    </a>
                    <div class="categories">
                        <a href="/?category=news" class="category-btn">Polar News</a>
                        <a href="/?category=life" class="category-btn">Traditions & Hearth</a>
                        <a href="/?category=auto" class="category-btn">Winter Travel</a>
                        <a href="/?category=creative" class="category-btn">DIY Décor</a>
                        <a href="/?category=gadgets" class="category-btn">Gift Gadgets</a>
                        <a href="/?category=science" class="category-btn">Snow Science</a>
                        <a href="/?category=games" class="category-btn">Party Games</a>
                        <a href="/?category=other" class="category-btn">Wish Wall</a>
                    </div>
                    <div class="countdown-panel">
                        <p>до Нового года</p>
                        <div id="countdown-timer" class="countdown-timer">00d • 00h • 00m • 00s</div>
                    </div>
                </div>
            </div>
        </header>
        <div class="filters">
            <a href="/?filter=new" class="{{if eq .Filter "new"}}active{{end}}">Fresh Sparks</a>
            <a href="/?filter=best" class="{{if eq .Filter "best"}}active{{end}}">Firework Hits</a>
            {{if .IsAuthenticated}}
                <a href="/?filter=my" class="{{if eq .Filter "my"}}active{{end}}">My Rituals</a>
                <a href="/?filter=liked" class="{{if eq .Filter "liked"}}active{{end}}">Sparkles I Loved</a>
                <a href="/?filter=commented" class="{{if eq .Filter "commented"}}active{{end}}">Chats I Warmed</a>
            {{end}}
        </div>
        <main>
            <div class="main-container">
                <section class="left-column">
                    <div class="profile-box">
                        <h3>Профиль: {{.ProfileUsername}}</h3>
                        <p>На форуме с {{.ProfileCreatedAt}}</p>
                        <h4>Публикации</h4>
                        {{if eq (len .Posts) 0}}
                            <p class="no-posts">Этот автор ещё не поделился историями.</p>
                        {{else}}
                            <div class="posts">
                                {{range .Posts}}
                                    <article class="post-card">
                                        <div class="post-header">
                                            {{if .ImageURL}}
                                                <img src="{{.ImageURL}}" alt="Post image" class="post-image">
                                            {{end}}
                                            <div class="post-info">
                                                <div class="post-badge">
                                                    ✨
                                                    {{if eq .Category "news"}}Polar News{{else if eq .Category "life"}}Traditions & Hearth{{else if eq .Category "auto"}}Winter Travel{{else if eq .Category "creative"}}DIY Décor{{else if eq .Category "gadgets"}}Gift Gadgets{{else if eq .Category "science"}}Snow Science{{else if eq .Category "games"}}Party Games{{else}}Wish Wall{{end}}
                                                </div>
                                                <h3>{{.Title}}</h3>
                                                <div class="post-meta">
                                                    <span>{{.CreatedAtStr}}</span>
                                                    <span>❤️ {{.Likes}} • ❄️ {{.Dislikes}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="post-content">{{.Content}}</p>
                                        <div class="button-group">
                                            <a href="/post?post_id={{.ID}}" class="hero-cta" style="font-size:0.9rem;">Открыть историю</a>
                                            {{if $.IsAuthenticated}}
                                                <div class="vote-buttons" id="votes-{{.ID}}">
                                                    <button onclick="vote('{{.ID}}', 'like')" class="vote-btn {{if eq .UserVote 1}}liked{{end}}" data-action="like">Поддержать</button>
                                                    <button onclick="vote('{{.ID}}', 'dislike')" class="vote-btn {{if eq .UserVote -1}}disliked{{end}}" data-action="dislike">Охладить</button>
                                                </div>
                                            {{end}}
                                        </div>
                                    </article>
                                {{end}}
                            </div>
                        {{end}}
                    </div>
                </section>
                <section class="right-column">
                    {{if not .IsAuthenticated}}
                        <div class="login-box">
                            <h3>Войти в Polar Lights</h3>
                            <form method="POST" action="/login">
                                <input type="email" name="email" placeholder="Email" required>
                                <input type="password" name="password" placeholder="Password" required>
                                <div class="button-group">
                                    <button type="submit">Войти</button>
                                    <a href="/register" class="register-btn">Регистрация</a>
                                </div>
                            </form>
                        </div>
                    {{else}}
                        <div class="user-box">
                            <p>С наступающим, {{.Username}}!</p>
                            <a href="/create-post">Создать огонёк</a>
                            <a href="/profile?user_id={{.UserID}}">Профиль</a>
                            <a href="/logout">Выход</a>
                        </div>
                    {{end}}
                    <div class="countdown-card">
                        <h3>Community Countdown</h3>
                        <p>Новый год через:</p>
                        <strong id="mini-countdown">00d • 00h • 00m • 00s</strong>
                    </div>
                </section>
            </div>
        </main>
        <footer>
            <p>© 2026 Polar Lights Forum • share the glow</p>
        </footer>
    </div>
</body>
</html>

